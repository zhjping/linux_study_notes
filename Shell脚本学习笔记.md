### <center>Linux常用命令</center>

#### 1. shell概述
##### 1.1 shell是什么
shell是一个命令行解释器，它为用户提供了一个向Linux内核发送请求以便运行程序的界面系统级程序，用户可以用shell来启动，挂起，停止，甚至是编写一些程序。shell还是一个功能相当强大的编程语言，易编写，易调试，灵活性较强。shell是解释执行的脚本语言，在shell中可以直接调用Linux系统命令

##### 1.2 shell的分类
- Bourne Shell：从1979年起就开始使用Bourne Shell，Bourne Shell的主文件名为sh。
- C Shell：C Shell主要在BSD版的Unix系统中使用，其语法和C语言相似而得名。

Shell的两种主要语法类型有Bourne和C，这两种语法彼此不兼容。Bourne家族（主要是Linux使用）主要包括sh，ksh，Bash，psh，zsh；C家族（主要Unix使用）主要包括：csh，tcsh。  

查看当前Shell类型：
[root@localhost ~]#echo \$SHELL
\$：表示调用变量名
&nbsp;
查看当前系统的可用shell
cat /etc/shells
&nbsp;
切换shell：输入要切换的shell名称后按回车
[root@localhost ~]#sh
返回输入exit

#### 2. 脚本执行方式
##### 2.1 echo输出命令

echo [选项] [输出内容]
选项：
-e	支持反斜线控制的字符转换
`[root@localhost ~]#echo -e "\e [1; 31m hello world \e[0m"`
输出颜色：
		30m=黑色	31m=红色	32m=绿色	33m=黄色
		34m=蓝色	35m=洋红	36m=青色	37m=白色

##### 2.2 第一个脚本
`[root@localhost ~]# vim hello.sh`

```
#!/bin/bash
#The first program

echo -e "\e[1;34m Hello world \e[0m"
```

##### 2.3 脚本执行
赋予执行权限，直接运行

`[root@localhost ~]#chmod 755 hello.sh`
`[root@localhost ~]#./hello.sh`

通过Bash调用执行脚本
`bash hello.sh`

#### 3. Bash的基本功能
##### 3.1 命令别名与快捷键
- 查看与设定别名
	alias	#查看系统中所以的命令别名
	alias	别名='原命令'	#设定命令别名

- 别名永久生效与删除别名
	vi /root/.bashrc	#写入环境变量配置文件（重起后生效）
	执行： source .bashrc 后直接永久生效
	unalias 别名		#删除别名（暂时删除）
	__注意：用命令行修改别名暂时生效，用文件修改别名永久生效__

- 命令生效顺序
  1. 第一顺位执行用绝对路径或相对路径执行的命令
  2. 第二顺位执行别名
  3. 第三顺位执行Bash的内部命令
  4. 第四顺位执行按照$PATH环境变量定义的目录查找顺序找到的第一个命令

- 常用快捷键
  - ctrl+c	强制终止当前命令
  - ctrl+l	清屏
  - ctrl+a	光标移动到命令行行首
  - ctrl+e	光标移动到命令行行尾
  - ctrl+u	从光标所在位置删除到行首
  - ctrl+z	把命令放入后台
  - ctrl+r	在历史命令中搜索

##### 3.2 历史命令

history [选项] [历史命令保存文件]
	选项：
		-c	清空历史命令
		-w	把缓存中的历史命令写入历史命令保存文件/root/.bash_history

	历史命令默认保存1000条，可以在环境变量配置文件/etc/profile中进行修改

	历史命令的调用
		使用上下箭头调用以前的历史命令
		使用"!n"重复执行第n条历史命令
		使用"!!"重复执行上一条命令
		使用"!字串"重复执行最后一条以该字串开头的命令


##### 3.3 输出重定向

	标准输出重定向：
		命令 > 文件	以覆盖的方式，把命令的正确输出输出到指定的文件或设备中
		命令 >> 文件	以追加的方式，把命令的正确输出输出到指定的文件或设备中

	标准错误输出重定向：
		错误命令 2> 文件	以覆盖的方式，把命令的错误输出输出到指定的文件或设备中
		错误命令 2>> 文件	以追加的方式，把命令的错误输出输出到指定的文件或设备中

	正确输出和错误输出同时保存：
		命令 > 文件 2>&1	以覆盖的方式，把命令的正确和错误输出都保存到同一个文件当中
		命令 >> 文件 2>&1	以追加的方式，把命令的正确和错误输出都保存到同一个文件当中

		命令 &> 文件 		以覆盖的方式，把命令的正确和错误输出都保存到同一个文件当中
		命令 &>> 文件 	以追加的方式，把命令的正确和错误输出都保存到同一个文件当中

		命令 >> 文件1 2>> 文件2	把正确输出追加到文件1中，把错误输出追加到文件2中


##### 3.4 输入重定向

[root@localhost ~]#wc [选项名] [文件名]  
选项：  
	-c	统计字节数  
	-w	统计单词数  
	-l	统计行数  

命令 < 文件		把文件作为命令的输入  
命令 << 标识符	把标识符和标识符之间的内容作为命令的输入  

##### 3.5 管道符

- __;__  
	command1;command2  
	多个命令顺序执行，命令之间没有任何逻辑联系  

- __&&__  
	command1&&command2  
	逻辑与，当command1正确执行，则command2才会执行，当command1不正确执行，则command2不会执行
- __||__  
	command1||command2  
	逻辑或，当command1执行不正确，则command2才会执行，当command1正确执行，则command2不会执行

- 管道符命令格式：  
	`[root@localhost ~]#command1 | command2`  
	"command1"的正确输出作为"command2"的操作对象

- 举例：  
	`netstat -an | grep ESTABLISHED | wc -l`  
	`ll -a /etc/ | more`


##### 3.6 通配符

- __？__  
	匹配1个任意字符。

- __*__  
	匹配0个或多个任意字符，也就是可以匹配任意内容。

- __[]__  
	匹配中括号中的任意1个字符。

- __[-]__  
	匹配中括号中的任意1个字符,-代表一个范围。例如：[a-z]代表匹配1个小写字母。

- __[^]__  
	逻辑非，表示匹配不是中括号内的一个字符。例如：[^0-9]代表匹配一个不是数字的字符。

- __''__  
	单引号，在单引号中的所有特殊符号，如"$","`"（反引号）都没有特殊含义。

- __""__  
	双引号，在双引号中的特殊符号都没有特殊含义，但是"$","`"(反引号)和"\\"是例外，拥有"调用变量的值","引用命令"和"转义符"的特殊含义

- __``__  
	反引号，反引号括起来的是系统命令，在Bash中会先执行它。和\$()作用一样，不过推荐使$(),因为反引号非常容易看错。\$()	和反引号作用一样，用来引用系统命令

- __#__  
	在shell脚本中，#开头的行代表注释

- __\$__  
	用于调用变量的值，如：需要调用变量name的值时，需要用$name的方式得到变量的值

- __\\__  
	转义符，跟在\之后的特殊符号将失去特殊含义，变为普通字符。如：\$将输出"$"符号，而不是当作变量引用。


#### 4. 常用shell脚本命令使用说明

- tr命令  
	tr（translate缩写）主要用于删除文件中的控制字符，或进行字符转换。  
	语法：tr [–c/d/s/t] [SET1] [SET2]  
	SET1: 字符集1  
	SET2：字符集2  
	-c:complement，保留SET1中的字符，将其他字符替换为SET2  
	-d:delete，删除SET1中所有的字符，不转换  
	-s: squeeze-repeats，压缩SET1中重复的字符  
	-t: truncate-set1，将SET1中的字符转换成SET2，一般缺省为-t  
